!function(e,t){if("function"==typeof define&&define.amd)define("/Site",["exports","jquery","Base","Menubar","Sidebar","PageAside"],t);else if("undefined"!=typeof exports)t(exports,require("jquery"),require("Base"),require("Menubar"),require("Sidebar"),require("PageAside"));else{var n={exports:{}};t(n.exports,e.jQuery,e.Base,e.SectionMenubar,e.SectionSidebar,e.SectionPageAside),e.Site=n.exports}}(this,function(e,t,n,a,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.run=function(){c().run()},e.getInstance=c,e.default=e.Site=void 0,t=babelHelpers.interopRequireDefault(t),n=babelHelpers.interopRequireDefault(n),a=babelHelpers.interopRequireDefault(a),i=babelHelpers.interopRequireDefault(i),o=babelHelpers.interopRequireDefault(o);var r=document,l=(0,t.default)(document),u=(0,t.default)("body"),s=function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(n).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"initialize",value:function(){this.startLoading(),this.initializePluginAPIs(),this.initializePlugins(),this.initComponents()}},{key:"process",value:function(){this.polyfillIEWidth(),this.initBootstrap(),this.setupMenubar(),this.setupFullScreen(),this.setupMegaNavbar(),this.setupTour(),this.setupNavbarCollpase(),this.$el.on("click",".dropdown-menu-media",function(e){e.stopPropagation()})}},{key:"_getDefaultMeunbarType",value:function(){return"hide"}},{key:"menubarType",value:function(e){(0,t.default)('[data-toggle="menubar"]').each(function(){var n=(0,t.default)(this),a=(0,t.default)(this).find(".hamburger");a.length>0?a.toggleClass("hided",!("open"===e)):n.toggleClass("hided",!("open"===e))})}},{key:"initComponents",value:function(){this.menubar=new a.default({$el:(0,t.default)(".site-menubar")}),this.sidebar=new i.default;var e=(0,t.default)(".page-aside");e.length>0&&(this.aside=new o.default({$el:e}),this.aside.run()),this.menubar.run(),this.sidebar.run()}},{key:"getCurrentBreakpoint",value:function(){var e=Breakpoints.current();return e?e.name:"lg"}},{key:"initBootstrap",value:function(){l.tooltip({selector:"[data-tooltip=true]",container:"body"}),(0,t.default)('[data-toggle="tooltip"]').tooltip(),(0,t.default)('[data-toggle="popover"]').popover()}},{key:"polyfillIEWidth",value:function(){if(navigator.userAgent.match(/IEMobile\/10\.0/)){var e=r.createElement("style");e.appendChild(r.createTextNode("@-ms-viewport{width:auto!important}")),r.querySelector("head").appendChild(e)}}},{key:"setupFullScreen",value:function(){"undefined"!=typeof screenfull&&(l.on("click",'[data-toggle="fullscreen"]',function(){return screenfull.enabled&&screenfull.toggle(),!1}),screenfull.enabled&&r.addEventListener(screenfull.raw.fullscreenchange,function(){(0,t.default)('[data-toggle="fullscreen"]').toggleClass("active",screenfull.isFullscreen)}))}},{key:"setupMegaNavbar",value:function(){l.on("click",".navbar-mega .dropdown-menu",function(e){e.stopPropagation()}).on("show.bs.dropdown",function(e){var n=(0,t.default)(e.target),a=(e.relatedTarget?(0,t.default)(e.relatedTarget):n.children('[data-toggle="dropdown"]')).data("animation");if(a){var i=n.children(".dropdown-menu");i.addClass("animation-".concat(a)).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass("animation-".concat(a))})}}).on("shown.bs.dropdown",function(e){var n=(0,t.default)(e.target).find(".dropdown-menu-media > .list-group");if(n.length>0){var a=n.data("asScrollable");a?a.update():n.asScrollable({namespace:"scrollable",contentSelector:"> [data-role='content']",containerSelector:"> [data-role='container']"})}})}},{key:"setupMenubar",value:function(){var e=this;(0,t.default)(document).on("click",'[data-toggle="menubar"]',function(){var t=e.menubar.type;switch(t){case"open":t="hide";break;case"hide":t="open"}return e.menubar.change(t),e.menubarType(t),!1}),(0,t.default)(document).on("collapsed.site.menu expanded.site.menu",function(){"open"===e.menubar.type&&e.menubar&&e.menubar.scrollable&&e.menubar.scrollable.update()}),Breakpoints.on("change",function(){e.menubar.type=e._getDefaultMeunbarType(),e.menubar.change(e.menubar.type)})}},{key:"setupNavbarCollpase",value:function(){(0,t.default)(document).on("click","[data-target='#site-navbar-collapse']",function(e){var n=(0,t.default)(this).hasClass("collapsed");u.addClass("site-navbar-collapsing"),u.toggleClass("site-navbar-collapse-show",!n),setTimeout(function(){u.removeClass("site-navbar-collapsing")},350)})}},{key:"startLoading",value:function(){if(void 0===t.default.fn.animsition)return!1;u.animsition({inClass:"fade-in",inDuration:800,loading:!0,loadingClass:"loader-overlay",loadingParentElement:"html",loadingInner:'\n      <div class="loader-content">\n        <div class="loader-index">\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>',onLoadEvent:!0})}},{key:"setupTour",value:function(e){if(void 0===this.tour){if("undefined"==typeof introJs)return;var n=(0,t.default)("body").css("overflow"),a=this,i=Config.get("tour");this.tour=introJs(),this.tour.onbeforechange(function(){(0,t.default)("body").css("overflow","hidden")}),this.tour.oncomplete(function(){(0,t.default)("body").css("overflow",n)}),this.tour.onexit(function(){(0,t.default)("body").css("overflow",n)}),this.tour.setOptions(i),(0,t.default)(".site-tour-trigger").on("click",function(){a.tour.start()})}}}]),n}(n.default);e.Site=s;var d=null;function c(){return d||(d=new s),d}var f=s;e.default=f});